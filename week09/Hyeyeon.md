# 자바스크립트 완벽 가이드 9주차 학습 - 혜연

## 15장 웹 브라우저의 자바스크립트

### 15.4 CSS 스크립트

- 자바스크립트는 CSS 스크립트를 통해 문서의 외관과 레이아웃을 수정할 수 있음.
- 자바스크립트로 조작할 일이 많은 CSS 스타일
  - display 스타일을 none으로 설정하여 요소를 감추기
  - position을 absolute, relative, fixed로 설정하고 요소의 위치를 동적으로 바꾸기
  - transfrom 스타일로 요소를 이동, 확대, 축소, 회전하기
  - transition 스타일로 애니메이션 적용(시작)하기

#### 15.4.1 CSS 클래스

- HTML 태그의 class 속성에 CSS 클래스를 추가하거나 제거하여 스타일을 쉽게 바꿀 수 있음.
- classList 프로퍼티를 사용

#### 15.4.2 인라인 스타일

- CSSStyleDeclaration 객체인 style 프로퍼티를 이용하여 style 속성을 변경
- CSSStyleDeclaration 프로퍼티 이름은 CSS 스타일 프로퍼티와 달리 camelCase 사용
- getAttribute(), setAttribute() 메서드나 CSSStyleDeclaration 객체의 cssText 프로퍼티를 사용하여 인라인 스타일을 변경할 수도 있음.

#### 15.4.3 계산된 스타일

- 요소의 계산된 스타일: 브라우저가 요소의 인라인 스타일과 모든 스타일시트에서 가져온 적용 가능한 스타일 규칙 전체를 합해 계산한 프로퍼티 값 집합, 즉 요소를 표시할 때 실제로 사용되는 프로퍼티 집합
- CSSStyleDeclaration 객체로 표현됨
- Window.getComputedStyle() 메서드로 계산된 스타일을 구할 수 있음.
  - 첫 번째 인자는 계산된 스타일을 가져올 요소, 두 번째 인자는 CSS 가상 요소를 지정
- 읽기 전용이며 절댓값임.
- 단축 프로퍼티는 존재하지 않음.
- cssText 프로퍼티가 존재하지 않음.

#### 15.4.4 스타일시트 스크립트

- `<style>`, `<link>` 태그를 이용하여 스타일시트 자체를 조작할 수 있음.

#### 15.4.5 CSS 애니메이션과 이벤트

- 웹 브라우저는 transition의 시작과 끝에서 이벤트(TransitionEvent)를 일으키므로 자바스크립트로 CSS 트랜지션의 진행을 모니터링할 수 있음.
- 트랜지션이 처음 시작하면 transitionrun 이벤트가 발생
- 시각적 변화가 일어남과 동시에 transitionstart 이벤트 발생
- 트랜지션이 완료되면 transitionend 이벤트 발생
- CSS 애니메이션은 CSS 클래스에 애니메이션 프로퍼티를 정의하고 요소에 클래스를 추가하여 사용 가능
- CSS 애니메이션도 이벤트(AnimationEvent)가 발생함.
- 애니메이션이 시작할 때 animationstart, 애니메이션이 끝날 때 animationend 이벤트가 발생
- 애니메이션이 두 번 이상 반복되면 마지막을 제외하고 반복마다 animationiteration 이벤트 발생

### 15.5 문서 지오메트리와 스크롤

#### 15.5.1 문서 좌표와 뷰포트 좌표

- 최상위 창과 탭에서 뷰포트는 문서 콘텐츠를 실제로 표시하는 부분, 즉 메뉴와 툴바, 탭 등을 제거한 부분
- getBoundingClientRect(), elementFromPoint() 메서드와 마우스/포인터 이벤트 객체의 clintX, clientY 프로퍼티는 뷰포트 좌표를 사용
- 컨테이너 요소에 relative 포지션을 지정하고 top, left 프로퍼티를 0으로 설정해서 컨테이너 요소 내의 absolute 포지션이 지정된 요소의 위치를 기준으로 삼는 좌표계를 컨테이너 좌표라고 함.

#### 15.5.2 요소의 위치 검색

- getBoundingClientRect() 메서드를 호출해 요소의 크기와 위치를 파악할 수 있음.
- getClientRects() 메서드는 인라인 요소의 개별 사각형에서 각각 getBoundingClientRect()를 호출한 것처럼 읽기 전용의 배열 비슷한 객체를 반환함.

#### 15.5.3 지정된 위치에 있는 요소 파악

- getBoundingClientRect() 메서드로 요소의 현재 위치를 알 수 있음.
- 뷰포트에서 특정 좌표에 있는 요소가 무엇인지 알아야 할 때는 Document.elementFromPoint() 메서드를 사용

#### 15.5.4 스크롤

- Window.scrollTo() 메서드는 문서 좌표 기준인 x, y 좌표를 받아 이 값을 스크롤 오프셋으로 설정
- Window.scrollBy() 메서드는 scrollTo()와 비슷하지맞ㄴ 인자는 현재 스크롤 위치에 상대적이며 현재 스크롤 위치에 더해짐.
- scrollIntoView() 메서드는 호출된 요소가 뷰포트에 나타날 때까지 스크롤

#### 15.5.5 뷰포트 크기, 콘탠츠 크기, 스크롤 위치

- 브라우저 창의 뷰포트 크기는 window.innerWidth, window.innerHEight 프로퍼티로 알 수 있음.
- 요소의 offsetWidth, offsetHeight 프로퍼티는 화면에 표시된 크기를 CSS 픽셀로 반환함.
- clientWidth, clientHeight는 보더가 포함되지 않으며 콘텐츠 영역과 패딩만 포함
- scrollWidth, scrollHeight는 요소의 콘텐츠 영역과 패딩, 넘치는 콘텐츠를 합한 크기

### 15.6 웹 컴포넌트

- 웹 컴포넌트는 프레임워크의 대안으로 브라우저에 네이티브로 추가된 기능
- 프레임워크에 의존하지 않고 자바스크립트와 새로운 태그만 써서 재사용하기 쉬운 UI 컴포넌트를 만듦.

#### 15.6.1 웹 컴포넌트 사용

- 보통 모듈로 작성하여 `type="module"로 불러와 사용
- HTML 태그 이름을 정의할 때 태그 이름에 반드시 하이픈이 들어가야 함.
- 웹 컴포넌트에는 스스로 닫는 태그를 쓸 수 없음.
- slot 속성은 자식 요소를 어디에 표시할지 정하는 속성
- module 스크립트는 문서 콘텐츠 파싱이 끝난 뒤에 불러오므로 브라우저는 컴포넌트가 정의되기 전에 웹 컴포넌트 태그를 만날 경우 범용 HTMLElement를 DOM 트리에 추가한 뒤 나중에 커스텀 요소가 정의되면 범용 요소를 업그레이드함.

#### 15.6.2 HTML 템플릿

- HTML <template> 태그는 웹 페이지에 자주 등장하는 컴포넌트를 최적화하기에 적합
- 기본적인 HTML 구조를 웹 페이지에 여러번 반복해야할 때 <template>을 한 번 정의하고 필요한 만큼 자바스크립트로 복사해서 사용

#### 15.6.3 커스터 요소

- 커스텀 요소는 자바스크립트 클래스와 HTML 태그 이름을 묶어 해당 태그가 자동으로 클래스의 인스턴스가 되게 함.
- cumtomElements.define() 메서드의 첫 번째 인자는 웹 컴포넌트 태그 이름, 두 번째 인자는 HTMLElement의 서브클래스
- 커스텀 요소 클래스에는 다른 프로퍼티와 메서드도 필요한 만큼 정의할 수 있고, 요소 속성을 자바스크립트 프로퍼티로 사용할 수 있도록 게터와 세터 메서드도 보통 정의함.

#### 15.6.4 섀도우 DOM

- 섀도우 루트의 자손은 일반적인 DOM 트리에 속하지 않고, 호스트 요소의 children 배열에도 포함되지 않으며, querySelector()와 같은 일반적인 DOM 순회 메서드에서 열거되지 않음.
